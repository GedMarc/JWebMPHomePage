public class PushAdapter
		extends AtmosphereAdapter
{
@Inject
private BroadcasterFactory broadcasterFactory;

@Override
public AjaxResponse onReady(AtmosphereResource r)
{
    Broadcaster broadcaster = broadcasterFactory.lookup("Everyone");
    if (broadcaster == null)
    {
        broadcaster = broadcasterFactory.get("Everyone");
    }
    broadcaster.addAtmosphereResource(r);
    broadcaster.broadcast(
            new AjaxResponse<>().addReaction(
               new AjaxResponseReaction("You're Connected!",
                    "You have been added to the Everyone chat group",
                    ReactionType.DialogDisplay))
            );
    return super.onReady(r);
}

@Override
public void onDisconnect(AtmosphereResourceEvent event)
{
    Broadcaster broadcaster = broadcasterFactory.lookup("Everyone");
    if (broadcaster == null)
    {
        broadcaster = broadcasterFactory.get("Everyone");
    }
    broadcaster.removeAtmosphereResource(event.getResource());
    super.onDisconnect(event);
}

@Override
public AjaxResponse onMessage(AtmosphereWSReceiver message)
{
    return super.onMessage(message);
}

@Override
public AjaxResponse onResume(AtmosphereResourceEvent r)
{
    return super.onResume(r);
}
}
}
